<!DOCTYPE html>
<html lang="vi">
<head>
Â  Â  <meta charset="UTF-8">
    Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    Â  Â  <title>XÃ¢y dá»±ng PC (Admin Full Chá»©c NÄƒng)</title>
Â  Â Â 
Â  Â  <style>
Â  Â  Â  Â  /* (ToÃ n bá»™ CSS chung cá»§a báº¡n giá»¯ nguyÃªn, khÃ´ng thay Ä‘á»•i) */
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
Â  Â  Â  Â  Â  Â  background-color: #f0f2f5;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  padding: 30px;
            padding-top: 10px; /* Giáº£m padding trÃªn Ä‘iá»‡n thoáº¡i */
Â  Â  Â  Â  Â  Â  min-height: 100vh;
            box-sizing: border-box; /* ThÃªm cÃ¡i nÃ y Ä‘á»ƒ padding khÃ´ng bá»‹ lá»—i */
Â  Â  Â  Â  }
        /* ThÃªm má»™t chÃºt responsive cho Ä‘iá»‡n thoáº¡i */
        @media (max-width: 600px) {
            body { padding: 10px; }
            .container { padding: 15px; }
            .form-grid { grid-template-columns: 1fr; } /* Admin trÃªn 1 cá»™t */
        }

Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  background-color: #ffffff;
Â  Â  Â  Â  Â  Â  padding: 30px;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  max-width: 900px;
Â  Â  Â  Â  Â  Â  margin-bottom: 30px;
            box-sizing: border-box; /* ThÃªm cÃ¡i nÃ y */
Â  Â  Â  Â  }
Â  Â  Â  Â  h1 { text-align: center; color: #1a1a1a; margin-top: 0; font-size: 2em; }
Â  Â  Â  Â  h2 { text-align: center; color: #333; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
Â  Â  Â  Â  h3 {
Â  Â  Â  Â  Â  Â  margin-top: 30px;
Â  Â  Â  Â  Â  Â  color: #1a1a1a;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #ccc;
Â  Â  Â  Â  Â  Â  padding-bottom: 5px;
Â  Â  Â  Â  }
Â  Â  Â  Â  p { text-align: center; color: #555; margin-bottom: 30px; font-size: 1.1em; }
Â  Â  Â  Â  .component { display: flex; align-items: center; margin-bottom: 20px; gap: 15px; flex-wrap: wrap; /* Cho phÃ©p xuá»‘ng hÃ ng trÃªn Ä‘iá»‡n thoáº¡i */ }
Â  Â  Â  Â  .component label { font-weight: 600; color: #333; flex-basis: 30%; min-width: 140px; }
Â  Â  Â  Â  .component-select { flex-grow: 1; padding: 10px 12px; font-size: 16px; border: 1px solid #ccc; border-radius: 6px; background-color: #fafafa; }
Â  Â  Â  Â  .component-quantity { width: 75px; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 6px; text-align: center; box-sizing: border-box; flex-shrink: 0; }
Â  Â  Â  Â  .summary-table { margin-top: 30px; padding-top: 20px; border-top: 2px solid #eee; overflow-x: auto; /* Cho phÃ©p cuá»™n báº£ng trÃªn ÄT */ }
Â  Â  Â  Â  .summary-table table { width: 100%; border-collapse: collapse; min-width: 600px; /* Giá»¯ báº£ng khÃ´ng bá»‹ vá»¡ */ }
Â  Â  Â  Â  .summary-table th, .summary-table td { border: 1px solid #ddd; padding: 12px 15px; text-align: left; font-size: 15px; }
Â  Â  Â  Â  .summary-table th { background-color: #f8f8f8; font-weight: 600; }
Â  Â  Â  Â  .summary-table td:nth-child(2), .summary-table td:nth-child(3) { text-align: center; }
Â  Â  Â  Â  .summary-table td:nth-child(4), .summary-table td:nth-child(5) { text-align: right; font-weight: 500; }
Â  Â  Â  Â  .total { margin-top: 20px; padding-top: 20px; border-top: 2px solid #eee; text-align: right; }
Â  Â  Â  Â  .total h2 { color: #d90429; font-size: 1.8em; margin: 0; border: none; }
Â  Â  Â  Â  .action-buttons { display: flex; justify-content: flex-end; gap: 15px; margin-top: 30px; padding-top: 20px; border-top: 2px solid #eee; }
Â  Â  Â  Â  .btn { padding: 12px 20px; font-size: 16px; font-weight: 600; color: #ffffff; border: none; border-radius: 6px; cursor: pointer; text-transform: uppercase; transition: all 0.2s ease; }
Â  Â  Â  Â  .btn:hover { opacity: 0.85; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
Â  Â  Â  Â  .btn-print { background-color: #d90429; } .btn-secondary { background-color: #6c757d; } .btn-admin { background-color: #007bff; } .btn-danger { background-color: #dc3545; }
Â  Â  Â  Â  .btn-success { background-color: #28a745; }
Â  Â  Â  Â  .modal-hidden { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.5); }
Â  Â  Â  Â  .modal-content { background-color: #fefefe; margin: 5% auto; padding: 25px 30px; border: 1px solid #888; width: 90%; max-width: 900px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
Â  Â  Â  Â  .modal-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 15px; }
Â  Â  Â  Â  .modal-header h2 { margin: 0; color: #333; border: none; }
Â  Â  Â  Â  .close-btn { color: #aaa; font-size: 28px; font-weight: bold; border: none; background: none; cursor: pointer; }
Â  Â  Â  Â  .modal-body { padding: 20px 0; overflow-x: auto; /* Cho phÃ©p cuá»™n báº£ng modal trÃªn ÄT */ }
Â  Â  Â  Â  .modal-body table { width: 100%; border-collapse: collapse; min-width: 600px; }
Â  Â  Â  Â  .modal-body th, .modal-body td { border: 1px solid #ddd; padding: 8px; }
Â  Â  Â  Â  .modal-body input { width: 100%; padding: 6px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
Â  Â  Â  Â  .modal-body input:disabled { background-color: #f0f0f0; color: #333; border: 1px solid #ddd; }
Â  Â  Â  Â  .modal-body tfoot td { font-size: 1.1em; color: #d90429; }
Â  Â  Â  Â  .modal-actions { text-align: right; border-top: 1px solid #eee; padding-top: 20px; margin-top: 20px; }
Â  Â  Â  Â  #admin-panel { border-top: 4px solid #007bff; }
Â  Â  Â  Â  .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
Â  Â  Â  Â  .form-group { display: flex; flex-direction: column; }
Â  Â  Â  Â  .form-group label { font-weight: 600; color: #333; margin-bottom: 5px; }
Â  Â  Â  Â  .form-group input, .form-group select { padding: 10px 12px; font-size: 16px; border: 1px solid #ccc; border-radius: 6px; }
Â  Â  Â  Â  .form-group input:disabled, .form-group select:disabled { background-color: #eee; cursor: not-allowed; }
Â  Â  Â  Â  .form-actions { grid-column: 1 / -1; display: flex; justify-content: space-between; flex-wrap: wrap; gap: 10px; } /* Cho phÃ©p xuá»‘ng hÃ ng */
Â  Â  Â  Â  #admin-edit-panel { border-top: 2px solid #eee; margin-top: 30px; padding-top: 20px; }
Â  Â  Â  Â  #toggle-admin-btn { position: fixed; bottom: 20px; right: 20px; z-index: 999; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
Â  Â  </style>
Â  Â  </head>
<body>
Â  Â Â 
Â  Â  Â  Â  <div class="container" id="build-area">
Â  Â  Â  Â  <h1>XÃ¢y Dá»±ng Cáº¥u HÃ¬nh PC</h1>
Â  Â  Â  Â  <p>Chá»n linh kiá»‡n, sá»‘ lÆ°á»£ng vÃ  xem tÃ³m táº¯t cáº¥u hÃ¬nh cá»§a báº¡n.</p>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div id="selector-area">
Â  Â  Â  Â  Â  Â  <div class="component"><label for="cpu">CPU (Vi xá»­ lÃ½):</label><select id="cpu" class="component-select"></select><input type="number" class="component-quantity" value="1" min="0" max="5"></div>
Â  Â  Â  Â  Â  Â  <div class="component"><label for="mainboard">Mainboard:</label><select id="mainboard" class="component-select"></select><input type="number" class="component-quantity" value="1" min="0" max="5"></div>
Â  Â  Â  Â  Â  Â  <div class="component"><label for="ram">RAM:</label><select id="ram" class="component-select"></select><input type="number" class="component-quantity" value="1" min="0" max="10"></div>
Â  Â  Â  Â  Â  Â  <div class="component"><label for="vga">VGA (Card Ä‘á»“ há»a):</label><select id="vga" class="component-select"></select><input type="number" class="component-quantity" value="1" min="0" max="5"></div>
Â  Â  Â  Â  Â  Â  <div class="component"><label for="ssd">á»” cá»©ng SSD:</label><select id="ssd" class="component-select"></select><input type="number" class="component-quantity" value="1" min="0" max="10"></div>
Â  Â  Â  Â  Â  Â  <div class="component"><label for="hdd">á»” cá»©ng HDD:</label><select id="hdd" class="component-select"></select><input type="number" class="component-quantity" value="1" min="0" max="10"></div>
Â  Â  Â  Â  Â  Â  <div class="component"><label for="cooler">Táº£n nhiá»‡t:</label><select id="cooler" class="component-select"></select><input type="number" class="component-quantity" value="1" min="0" max="5"></div>
Â  Â  Â  Â  Â  Â  <div class="component"><label for="monitor">MÃ n hÃ¬nh:</label><select id="monitor" class="component-select"></select><input type="number" class="component-quantity" value="1" min="0" max="5"></div>
Â  Â  Â  Â  Â  Â  <div class="component"><label for="psu">PSU (Nguá»“n):</label><select id="psu" class="component-select"></select><input type="number" class="component-quantity" value="1" min="0" max="5"></div>
Â  Â  Â  Â  Â  Â  <div class="component"><label for="case">Vá» Case:</label><select id="case" class="component-select"></select><input type="number" class="component-quantity" value="1" min="0" max="5"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="summary-table">
Â  Â  Â  Â  Â  Â  <h2>Báº£ng TÃ³m Táº¯t Cáº¥u HÃ¬nh</h2>
Â  Â  Â  Â  Â  Â  <table>
Â  Â  Â  Â  Â  Â  Â  Â  <thead><tr><th>TÃªn Linh Kiá»‡n</th><th>Báº£o HÃ nh</th><th>Sá»‘ LÆ°á»£ng</th><th>ÄÆ¡n GiÃ¡</th><th>ThÃ nh Tiá»n</th></tr></thead>
Â  Â  Â  Â  Â  Â  Â  Â  <tbody id="summary-tbody"></tbody>
Â  Â  Â  Â  Â  Â  </table>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="total"><h2>Tá»•ng: <span id="total-price">0 VNÄ</span></h2></div>
Â  Â  Â  Â  <div class="action-buttons"><button id="review-btn" class="btn btn-print">ğŸ“ Xem BÃ¡o GiÃ¡</button></div>
Â  Â  </div>
Â  Â Â 
Â  Â  Â  Â  <div class="container" id="admin-panel" style="display: none;">
Â  Â  Â  Â  <h2>Quáº£n Trá»‹ Dá»¯ Liá»‡u</h2>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div id="admin-add-panel">
Â  Â  Â  Â  Â  Â  <h3>1. ThÃªm Linh Kiá»‡n Má»›i</h3>
Â  Â  Â  Â  Â  Â  <form id="admin-add-form" class="form-grid">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group"><label for="add-type">Loáº¡i linh kiá»‡n:</label><select id="add-type"></select></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group"><label for="add-name">TÃªn linh kiá»‡n:</label><input type="text" id="add-name" required placeholder="vÃ­ dá»¥: Intel Core i5-13400F"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group"><label for="add-price">ÄÆ¡n giÃ¡ (VNÄ):</label><input type="number" id="add-price" required placeholder="vÃ­ dá»¥: 5200000"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group"><label for="add-warranty">Báº£o hÃ nh (thÃ¡ng):</label><input type="text" id="add-warranty" required placeholder="vÃ­ dá»¥: 36T"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-actions"><button type="submit" class="btn btn-admin">â• ThÃªm Linh Kiá»‡n</button><button type="button" id="reset-db-btn" class="btn btn-danger">â™»ï¸ Reset Kho Vá» Gá»‘c</button></div>
Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="admin-edit-panel">
Â  Â  Â  Â  Â  Â  <h3>2. Chá»‰nh Sá»­a Hoáº·c XÃ³a Linh Kiá»‡n</h3>
Â  Â  Â  Â  Â  Â  <form id="admin-edit-form" class="form-grid">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group"><label for="edit-type">1. Chá»n Loáº¡i Linh Kiá»‡n:</label><select id="edit-type"></select></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group"><label for="edit-item">2. Chá»n Linh Kiá»‡n Cáº§n Sá»­a/XÃ³a:</label><select id="edit-item" disabled></select></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group"><label for="edit-name">TÃªn má»›i:</label><input type="text" id="edit-name" disabled></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group"><label for="edit-price">GiÃ¡ má»›i:</label><input type="number" id="edit-price" disabled></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group"><label for="edit-warranty">Báº£o hÃ nh má»›i:</label><input type="text" id="edit-warranty" disabled></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-actions"><button type="button" id="save-edit-btn" class="btn btn-success" disabled>ğŸ’¾ LÆ°u Thay Äá»•i</button><button type="button" id="delete-item-btn" class="btn btn-danger" disabled>ğŸ—‘ï¸ XÃ³a Linh Kiá»‡n NÃ y</button></div>
Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â Â 
Â  Â  <button id="toggle-admin-btn" class="btn btn-admin">ğŸ‘¨â€ğŸ’» Má»Ÿ Admin</button>

Â  Â  Â  Â  <div id="print-preview-modal" class="modal-hidden">
Â  Â  Â  Â  <div class="modal-content" id="capture-area">
Â  Â  Â  Â  Â  Â  <div class="modal-header">
Â  Â  Â  Â  Â  Â  Â  Â  <h2>Kiá»ƒm Tra & Chá»‰nh Sá»­a Cáº¥u HÃ¬nh</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="close-modal-btn" class="close-btn">&times;</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="modal-body">
Â  Â  Â  Â  Â  Â  Â  Â  <p>Báº¡n cÃ³ thá»ƒ sá»­a sá»‘ lÆ°á»£ng, Ä‘Æ¡n giÃ¡. ThÃ nh tiá»n vÃ  tá»•ng cá»™ng sáº½ tá»± Ä‘á»™ng cáº­p nháº­t.</p>
Â  Â  Â  Â  Â  Â  Â  Â  <table>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <thead><tr><th>TÃªn Linh Kiá»‡n</th><th>Báº£o HÃ nh</th><th>Sá»‘ LÆ°á»£ng</th><th>ÄÆ¡n GiÃ¡</th><th>ThÃ nh Tiá»n</th></tr></thead>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tbody id="preview-tbody"></tbody>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tfoot><tr><td colspan="4" style="text-align: right; font-weight: bold; font-size: 1.2em;">Tá»”NG Cá»˜NG:</td><td id="preview-total" style="text-align: right; font-weight: bold; font-size: 1.2em;">0 VNÄ</td></tr></tfoot>
Â  Â  _Bá»</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="view-quote-btn" class="btn btn-print">ğŸ“„ Xem BÃ¡o GiÃ¡</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

Â  Â  // (Kho dá»¯ liá»‡u gá»‘c initialDatabase giá»¯ nguyÃªn)
Â  Â  const initialDatabase = {
Â  Â  Â  Â  cpu: [ { name: "Intel Core i3-12100F", price: 2490000, warranty: "36T" }, { name: "Intel Core i5-12400F", price: 3890000, warranty: "36T" } ],
Â  Â  Â  Â  mainboard: [ { name: "MSI PRO H610M-E", price: 1800000, warranty: "36T" } ],
Â  Â  Â  Â  ram: [ { name: "2x8GB DDR4 3200MHz", price: 1100000, warranty: "36T" } ],
Â  Â  Â  Â  vga: [ { name: "KhÃ´ng dÃ¹ng VGA rá»i", price: 0, warranty: "0T" } ],
Â  Â  Â  Â  ssd: [ { name: "SSD 512GB NVMe", price: 950000, warranty: "36T" } ],
Â  Â  Â  Â  hdd: [ { name: "HDD 1TB Sata 3", price: 1150000, warranty: "24T" } ],
Â  Â  Â  Â  cooler: [ { name: "Táº£n nhiá»‡t khÃ­ Stock", price: 0, warranty: "0T" } ],
Â  Â  Â  Â  monitor: [ { name: "MÃ n hÃ¬nh 24 inch 1080p 75Hz", price: 2500000, warranty: "24T" } ],
Â  Â  Â  Â  psu: [ { name: "Nguá»“n 650W 80 Plus Bronze", price: 1200000, warranty: "36T" } ],
Â  Â  Â  Â  'case': [ { name: "Vá» Case Xigmatek (3 Fan)", price: 650000, warranty: "12T" } ]
Â  Â  };
Â  Â Â 
Â  Â  // (Láº¥y cÃ¡c pháº§n tá»­ HTML User giá»¯ nguyÃªn)
Â  Â  const allComponentDivs = document.querySelectorAll('.component');
Â  Â  const summaryTbody = document.getElementById('summary-tbody');
Â  Â  const totalPriceElement = document.getElementById('total-price');
Â  Â  const currencyFormatter = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' });
Â  Â Â 
Â  Â  // (Láº¥y cÃ¡c pháº§n tá»­ Modal giá»¯ nguyÃªn)
Â  Â  const modal = document.getElementById('print-preview-modal');
Â  Â  const reviewBtn = document.getElementById('review-btn');
Â  Â  const closeModalBtn = document.getElementById('close-modal-btn');
Â  Â  const cancelPrintBtn = document.getElementById('cancel-print-btn');
Â  Â  const viewQuoteBtn = document.getElementById('view-quote-btn');
Â  Â  const previewTbody = document.getElementById('preview-tbody');
Â  Â  const previewTotalElement = document.getElementById('preview-total');

Â  Â  // (Láº¥y cÃ¡c pháº§n tá»­ Admin giá»¯ nguyÃªn)
Â  Â  const adminPanel = document.getElementById('admin-panel');
Â  Â  const toggleAdminBtn = document.getElementById('toggle-admin-btn');
Â  Â  const resetDbBtn = document.getElementById('reset-db-btn');
Â  Â  const adminAddForm = document.getElementById('admin-add-form');
Â  Â  const addTypeSelect = document.getElementById('add-type');
Â  Â  const editTypeSelect = document.getElementById('edit-type');
Â  Â  const editItemSelect = document.getElementById('edit-item');
Â  Â  const editNameInput = document.getElementById('edit-name');
Â  Â  const editPriceInput = document.getElementById('edit-price');
Â  Â  const editWarrantyInput = document.getElementById('edit-warranty');
Â  Â  const saveEditBtn = document.getElementById('save-edit-btn');
Â  Â  const deleteItemBtn = document.getElementById('delete-item-btn');

Â  Â  let currentDatabase = {};

Â  Â  // (HÃ m 0.1 -> 0.4: loadDatabase, saveDatabase, resetDatabase, parseCurrency giá»¯ nguyÃªn)
Â  Â  function loadDatabase() {
Â  Â  Â  Â  let db = JSON.parse(localStorage.getItem('pcBuilderDatabase'));
Â  Â  Â  Â  if (!db) { db = initialDatabase; saveDatabase(db); }
Â  Â  Â  Â  currentDatabase = db;
Â  Â  }
Â  Â  function saveDatabase(db) {
Â  Â  Â  Â  localStorage.setItem('pcBuilderDatabase', JSON.stringify(db));
Â  Â  Â  Â  currentDatabase = db;
Â  Â  }
Â  Â  function resetDatabase() {
Â  Â  Â  Â  if (confirm("Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a TOÃ€N Bá»˜ dá»¯ liá»‡u Ä‘Ã£ thÃªm vÃ  quay vá» kho gá»‘c?")) {
Â  Â  Â  Â  Â  Â  localStorage.removeItem('pcBuilderDatabase');
Â  Â  Â  Â  Â  Â  location.reload();
Â  Â  Â  Â  }
Â  Â  }
Â  Â  function parseCurrency(text) {
Â  Â  Â  Â  if (!text) return 0;
Â  Â  Â  Â  return parseFloat(text.replace(/[^0-9,-]+/g,"")) || 0;
Â  Â  }

Â  Â  // (HÃ m 1: populateSelectors giá»¯ nguyÃªn)
Â  Â  function populateSelectors() {
Â  Â  Â  Â  const allUserSelects = document.querySelectorAll('.component-select');
Â  Â  Â  Â  allUserSelects.forEach(sel => sel.innerHTML = '');
Â  Â  Â  Â  addTypeSelect.innerHTML = '';
Â  Â  Â  Â  editTypeSelect.innerHTML = '';
Â  Â  Â  Â  const defaultEditTypeOption = new Option("-- 1. Chá»n Loáº¡i --", "");
Â  Â  Â  Â  editTypeSelect.appendChild(defaultEditTypeOption);
Â  Â  Â  Â  for (const componentType in currentDatabase) {
Â  Â  Â  Â  Â  Â  const selectElement = document.getElementById(componentType);
Â  Â  Â  Â  Â  Â  const labelText = selectElement.closest('.component').querySelector('label').textContent.replace(':', '');
Â  Â  Â  Â  Â  Â  const defaultUserOption = new Option(`-- Chá»n ${labelText} --`, "0");
Â  Â  Â  Â  Â  Â  defaultUserOption.dataset.price = "0";
Â  Â  Â  Â  Â  Â  defaultUserOption.dataset.warranty = "0T";
Â  Â  Â  Â  Â  Â  selectElement.appendChild(defaultUserOption);
Â  Â  Â  Â  Â  Â  currentDatabase[componentType].forEach(product => {
Â  Â  Â  Â  Â  Â  Â  Â  const option = new Option(product.name, product.name);
Â  Â  Â  Â  Â  Â  Â  Â  option.dataset.price = product.price;
Â  Â  Â  Â  Â  Â  Â  Â  option.dataset.warranty = product.warranty;
Â  Â  Â  Â  Â  Â  Â  Â  selectElement.appendChild(option);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  const addOption = new Option(labelText, componentType);
Â  Â  Â  Â  Â  Â  addTypeSelect.appendChild(addOption);
Â  Â  Â  Â  Â  Â  const editOption = new Option(labelText, componentType);
Â  Â  Â  Â  Â  Â  editTypeSelect.appendChild(editOption);
Â  Â  Â  Â  }
_Bá»</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="view-quote-btn" class="btn btn-print">ğŸ“„ Xem BÃ¡o GiÃ¡</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

Â  Â  // (Kho dá»¯ liá»‡u gá»‘c initialDatabase giá»¯ nguyÃªn)
Â  Â  const initialDatabase = {
Â  Â  Â  Â  cpu: [ { name: "Intel Core i3-12100F", price: 2490000, warranty: "36T" }, { name: "Intel Core i5-12400F", price: 3890000, warranty: "36T" } ],
Â  Â  Â  Â  mainboard: [ { name: "MSI PRO H610M-E", price: 1800000, warranty: "36T" } ],
Â  Â  Â  Â  ram: [ { name: "2x8GB DDR4 3200MHz", price: 1100000, warranty: "36T" } ],
Â  Â  Â  Â  vga: [ { name: "KhÃ´ng dÃ¹ng VGA rá»i", price: 0, warranty: "0T" } ],
Â  Â  Â  Â  ssd: [ { name: "SSD 512GB NVMe", price: 950000, warranty: "36T" } ],
Â  Â  Â  Â  hdd: [ { name: "HDD 1TB Sata 3", price: 1150000, warranty: "24T" } ],
Â  Â  Â  Â  cooler: [ { name: "Táº£n nhiá»‡t khÃ­ Stock", price: 0, warranty: "0T" } ],
Â  Â  Â  Â  monitor: [ { name: "MÃ n hÃ¬nh 24 inch 1080p 75Hz", price: 2500000, warranty: "24T" } ],
Â  Â  Â  Â  psu: [ { name: "Nguá»“n 650W 80 Plus Bronze", price: 1200000, warranty: "36T" } ],
Â  Â  Â  Â  'case': [ { name: "Vá» Case Xigmatek (3 Fan)", price: 650000, warranty: "12T" } ]
Â  Â  };
Â  Â Â 
Â  Â  // (Láº¥y cÃ¡c pháº§n tá»­ HTML User giá»¯ nguyÃªn)
Â  Â  const allComponentDivs = document.querySelectorAll('.component');
Â  Â  const summaryTbody = document.getElementById('summary-tbody');
Â  Â  const totalPriceElement = document.getElementById('total-price');
Â  Â  const currencyFormatter = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' });
Â  Â Â 
Â  Â  // (Láº¥y cÃ¡c pháº§n tá»­ Modal giá»¯ nguyÃªn)
Â  Â  const modal = document.getElementById('print-preview-modal');
Â  Â  const reviewBtn = document.getElementById('review-btn');
Â  Â  const closeModalBtn = document.getElementById('close-modal-btn');
Â  Â  const cancelPrintBtn = document.getElementById('cancel-print-btn');
Â  Â  const viewQuoteBtn = document.getElementById('view-quote-btn');
Â  Â  const previewTbody = document.getElementById('preview-tbody');
Â  Â  const previewTotalElement = document.getElementById('preview-total');

Â  Â  // (Láº¥y cÃ¡c pháº§n tá»­ Admin giá»¯ nguyÃªn)
Â  Â  const adminPanel = document.getElementById('admin-panel');
Â  Â  const toggleAdminBtn = document.getElementById('toggle-admin-btn');
Â  Â  const resetDbBtn = document.getElementById('reset-db-btn');
Â  Â  const adminAddForm = document.getElementById('admin-add-form');
Â  Â  const addTypeSelect = document.getElementById('add-type');
Â  Â  const editTypeSelect = document.getElementById('edit-type');
Â  Â  const editItemSelect = document.getElementById('edit-item');
Â  Â  const editNameInput = document.getElementById('edit-name');
Â  Â  const editPriceInput = document.getElementById('edit-price');
Â  Â  const editWarrantyInput = document.getElementById('edit-warranty');
Â  Â  const saveEditBtn = document.getElementById('save-edit-btn');
Â  Â  const deleteItemBtn = document.getElementById('delete-item-btn');

Â  Â  let currentDatabase = {};

Â  Â  // (HÃ m 0.1 -> 0.4: loadDatabase, saveDatabase, resetDatabase, parseCurrency giá»¯ nguyÃªn)
Â  Â  function loadDatabase() {
Â  Â  Â  Â  let db = JSON.parse(localStorage.getItem('pcBuilderDatabase'));
Â  Â  Â  Â  if (!db) { db = initialDatabase; saveDatabase(db); }
Â  Â  Â  Â  currentDatabase = db;
Â  Â  }
Â  Â  function saveDatabase(db) {
Â  Â  Â  Â  localStorage.setItem('pcBuilderDatabase', JSON.stringify(db));
Â  Â  Â  Â  currentDatabase = db;
Â  Â  }
Â  Â  function resetDatabase() {
Â  Â  Â  TML User giá»¯ nguyÃªn)
Â  Â  const allComponentDivs = document.querySelectorAll('.component');
Â  Â  const summaryTbody = document.getElementById('summary-tbody');
Â  Â  const totalPriceElement = document.getElementById('total-price');
Â  Â  const currencyFormatter = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' });
Â  Â Â 
Â  Â  // (Láº¥y cÃ¡c pháº§n tá»­ Modal giá»¯ nguyÃªn)
Â  Â  const modal = document.getElementById('print-preview-modal');
Â  Â  const reviewBtn = document.getElementById('review-btn');
Â  Â  const closeModalBtn = document.getElementById('close-modal-btn');
Â  Â  const cancelPrintBtn = document.getElementById('cancel-print-btn');
Â  Â  const viewQuoteBtn = document.getElementById('view-quote-btn');
Â  Â  const previewTbody = document.getElementById('preview-tbody');
Â  Â  const previewTotalElement = document.getElementById('preview-total');

Â  Â  // (Láº¥y cÃ¡c pháº§n tá»­ Admin giá»¯ nguyÃªn)
Â  Â  const adminPanel = document.getElementById('admin-panel');
Â  Â  const toggleAdminBtn = document.getElementById('toggle-admin-btn');
Â  Â  const resetDbBtn = document.getElementById('reset-db-btn');
Â  Â  const adminAddForm = document.getElementById('admin-add-form');
Â  Â  const addTypeSelect = document.getElementById('add-type');
Â  Â  const editTypeSelect = document.getElementById('edit-type');
Â  Â  const editItemSelect = document.getElementById('edit-item');
Â  Â  const editNameInput = document.getElementById('edit-name');
Â  Â  const editPriceInput = document.getElementById('edit-price');
Â  Â  const editWarrantyInput = document.getElementById('edit-warranty');
Â  Â  const saveEditBtn = document.getElementById('save-edit-btn');
Â  Â  const deleteItemBtn = document.getElementById('delete-item-btn');

Â  Â  let currentDatabase = {};

Â  Â  // (HÃ m 0.1 -> 0.4: loadDatabase, saveDatabase, resetDatabase, parseCurrency giá»¯ nguyÃªn)
Â  Â  function loadDatabase() {
Â  Â  Â  Â  let db = JSON.parse(localStorage.getItem('pcBuilderDatabase'));
Â  Â  Â  Â  if (!db) { db = initialDatabase; saveDatabase(db); }
Â  Â  Â  Â  currentDatabase = db;
Â  Â  }
Â  Â  function saveDatabase(db) {
Â  Â  Â  Â  localStorage.setItem('pcBuilderDatabase', JSON.stringify(db));
Â  Â  Â  Â  currentDatabase = db;
Â  Â  }
Â  Â  function resetDatabase() {
Â  Â  Â  Â  if (confirm("Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a TOÃ€N Bá»˜ dá»¯ liá»‡u Ä‘Ã£ thÃªm vÃ  quay vá» kho gá»‘c?")) {
Â  Â  Â  Â  Â  Â  localStorage.removeItem('pcBuilderDatabase');
Â  Â  Â  Â  Â  Â  location.reload();
Â  Â  Â  Â  }
Â  Â  }
Â  Â  function parseCurrency(text) {
Â  Â  Â  Â  if (!text) return 0;
Â  Â  Â  Â  return parseFloat(text.replace(/[^0-9,-]+/g,"")) || 0;
Â  Â  }

Â  Â  // (HÃ m 1: populateSelectors giá»¯ nguyÃªn)
Â  Â  function populateSelectors() {
Â  Â  Â  Â  const allUserSelects = document.querySelectorAll('.component-select');
Â  Â  Â  Â  allUserSelects.forEach(sel => sel.innerHTML = '');
Â  Â  Â  Â  addTypeSelect.innerHTML = '';
Â  Â  Â  Â  editTypeSelect.innerHTML = '';
Â  Â  Â  Â  const defaultEditTypeOption = new Option("-- 1. Chá»n Loáº¡i --", "");
Â  Â  Â  Â  editTypeSelect.appendChild(defaultEditTypeOption);
Â  Â  Â  Â  for (const componentType in currentDatabase) {
Â  Â  Â  Â  Â  Â  const selectElement = document.getElementById(componentType);
Â  Â  Â  Â  Â  Â  const labelText = selectElement.closest('.component').querySelector('label').textContent.replace(':', '');
Â  Â  Â  Â  Â  Â  const defaultUserOption = new Option(`-- Chá»n ${labelText} --`, "0");
Â  Â  Â  Â  Â  Â  defaultUserOption.dataset.price = "0";
Â  Â  Â  Â  Â  Â  defaultUserOption.dataset.warranty = "0T";
Â  Â  Â  Â  Â  Â  selectElement.appendChild(defaultUserOption);
Â  Â  Â  Â  Â  Â  currentDatabase[componentType].forEach(product => {
Â  Â  Â  Â  Â  Â  Â  Â  const option = new Option(product.name, product.name);
Â  Â  Â  Â  Â  Â  Â  Â  option.dataset.price = product.price;
Â  Â  Â  Â  Â  Â  Â  Â  option.dataset.warranty = product.warranty;
Â  Â  Â  Â  Â  Â  Â  Â  selectElement.appendChild(option);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  const addOption = new Option(labelText, componentType);
Â  Â  Â  Â  Â  Â  addTypeSelect.appendChild(addOption);
Â  Â  Â  Â  Â  Â  const editOption = new Option(labelText, componentType);
Â  Â  Â  Â  Â  Â  editTypeSelect.appendChild(editOption);
Â  Â  Â  Â  }
Â  Â  }

Â  Â  // (HÃ m 2: updateBuildSummary giá»¯ nguyÃªn)
Â  Â  function updateBuildSummary() {
Â  Â  Â  Â  let totalBill = 0;
Â  Â  Â  Â  summaryTbody.innerHTML = '';Â 
Â  Â  Â  Â  allComponentDivs.forEach(component => {
Â  Â  Â  Â  Â  Â  const select = component.querySelector('.component-select');
Â  Â  Â  Â  Â  Â  if (!select) return;
Â  Â  Â  Â  Â  Â  const quantityInput = component.querySelector('.component-quantity');
Â  Â  Â  Â  Â  Â  const selectedOption = select.options[select.selectedIndex];
Â  Â  Â  Â  Â  Â  const price = parseFloat(selectedOption.dataset.price) || 0;
Â  Â  Â  Â  Â  Â  const quantity = parseInt(quantityInput.value) || 0;
Â  Â  Â  Â  Â  Â  if (price > 0 && quantity > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  const componentName = selectedOption.text;
Â  Â  Â  Â  Â  Â  Â  Â  const warranty = selectedOption.dataset.warranty || 'N/A';
Â  Â  Â  Â  Â  Â  Â  Â  const lineTotal = price * quantity;
Â  Â  Â  Â  Â  Â  Â  Â  totalBill += lineTotal;
Â  Â  Â  Â  Â  Â  Â  Â  const newRow = document.createElement('tr');
Â  Â  Â  Â  Â  Â  Â  Â  newRow.innerHTML = `<td>${componentName}</td><td style="text-align: center;">${warranty}</td><td style="text-align: center;">${quantity}</td><td style="text-align: right;">${currencyFormatter.format(price)}</td><td style="text-align: right; font-weight: bold;">${currencyFormatter.format(lineTotal)}</td>`;
Â  Â  Â  Â  Â  Â  Â  Â  summaryTbody.appendChild(newRow);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  Â  Â  totalPriceElement.textContent = currencyFormatter.format(totalBill);
Â  Â  }
Â  Â Â 
Â  Â  // (HÃ m 3: showPrintPreview (má»Ÿ modal) giá»¯ nguyÃªn)
Â  Â  function showPrintPreview() {
Â  Â  Â  Â  previewTbody.innerHTML = '';
Â  Â  Â  Â  let currentTotalBill = 0;
Â  Â  Â  Â  const mainRows = summaryTbody.querySelectorAll('tr');
Â  Â  Â  Â  if (mainRows.length === 0) { alert("ChÆ°a cÃ³ linh kiá»‡n nÃ o Ä‘Æ°á»£c chá»n!"); return; }
Â  Â  Â  Â  mainRows.forEach(row => {
Â  Â  Â  Â  Â  Â  const cells = row.querySelectorAll('td');
Â  Â  Â  Â  Â  Â  const name = cells[0].textContent, warranty = cells[1].textContent, quantity = cells[2].textContent, priceText = cells[3].textContent, lineTotalText = cells[4].textContent;
Â  Â  Â  Â  Â  Â  currentTotalBill += parseCurrency(lineTotalText);
Â  Â  Â  Â  Â  Â  const newRow = document.createElement('tr');
Â  Â  Â  Â  Â  Â  newRow.innerHTML = `<td><input type="text" class="edit-name" value="${name}"></td><td><input type="text" class="edit-warranty" value="${warranty}" style="width: 80px; text-align: center;"></td><td><input type="number" class="edit-qty" value="${quantity}" style="width: 70px; text-align: center;"></td><td><input type="text" class="edit-price" value="${priceText}" style="text-align: right;"></td><td><input type="text" class="edit-line-total" value="${lineTotalText}" style="text-align: right; font-weight: bold;" disabled></td>`;
Â  Â  Â  Â  Â  Â  previewTbody.appendChild(newRow);
Â  Â  Â  Â  Â  Â  const qtyInput = newRow.querySelector('.edit-qty'), priceInput = newRow.querySelector('.edit-price');
Â  Â  Â  Â  Â  Â  qtyInput.addEventListener('input', () => updateModalRow(newRow));
Â  Â  Â  Â  Â  Â  priceInput.addEventListener('input', () => updateModalRow(newRow));
Â  Â  Â  Â  });
Â  Â  Â  Â  previewTotalElement.textContent = currencyFormatter.format(currentTotalBill);
Â  Â  Â  Â  modal.style.display = 'block';
Â  Â  }
Â  Â Â 
Â  Â  // (HÃ m 4, 5, 6: hidePrintPreview, updateModalRow, updateModalTotal giá»¯ nguyÃªn)
Â  Â  function hidePrintPreview() { modal.style.display = 'none'; }
Â  Â  function updateModalRow(rowElement) {
Â  Â  Â  Â  const qtyInput = rowElement.querySelector('.edit-qty'), priceInput = rowElement.querySelector('.edit-price'), lineTotalInput = rowElement.querySelector('.edit-line-total');
Â  Â  Â  Â  const quantity = parseInt(qtyInput.value) || 0, price = parseCurrency(priceInput.value), lineTotal = quantity * price;
Â  Â  Â  Â  lineTotalInput.value = currencyFormatter.format(lineTotal);
Â  Â  Â  Â  updateModalTotal();
Â  Â  }
Â  Â  function updateModalTotal() {
Â  Â  Â  Â  let newGrandTotal = 0;
Â  Â  Â  Â  previewTbody.querySelectorAll('.edit-line-total').forEach(input => { newGrandTotal += parseCurrency(input.value); });
Â  Â  Â  Â  previewTotalElement.textContent = currencyFormatter.format(newGrandTotal);
Â  Â  }

Â  Â  // ===== HÃ€M 7 (ÄÃƒ Cáº¬P NHáº¬T Äá»‚ Sá»¬A Lá»–I POPUP) =====
Â  Â  function createQuotePage() {
Â  Â  Â  Â  // FIX: Má»Ÿ cá»­a sá»• NGAY Láº¬P Tá»¨C khi user click
Â  Â  Â  Â  const newWindow = window.open("", "_blank");
Â  Â  Â  Â  if (!newWindow) {
Â  Â  Â  Â  Â  Â  alert("TrÃ¬nh duyá»‡t Ä‘Ã£ cháº·n cá»­a sá»• má»›i. Vui lÃ²ng cho phÃ©p 'Pop-ups' cho trang nÃ y.");
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  // 2. Láº¥y dá»¯ liá»‡u tá»« modal
Â  Â  Â  Â  const quoteRows = previewTbody.querySelectorAll('tr');
Â  Â  Â  Â  if (quoteRows.length === 0) {
Â  Â  Â  Â  Â  Â  alert("KhÃ´ng cÃ³ gÃ¬ Ä‘á»ƒ hiá»ƒn thá»‹.");
Â  Â  Â  Â  Â  Â  newWindow.close(); // ÄÃ³ng tab trá»‘ng
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  let itemsHTML = '';
Â  Â  Â  Â  let finalTotal = 0;

Â  Â  Â  Â  quoteRows.forEach(row => {
Â  Â  Â  Â  Â  Â  const name = row.querySelector('.edit-name').value;
Â  Â  Â  Â  Â  Â  const warranty = row.querySelector('.edit-warranty').value;
Â  Â  Â  Â  Â  Â  const quantity = row.querySelector('.edit-qty').value;
Â  Â  Â  Â  Â  Â  const priceText = row.querySelector('.edit-price').value;
Â  Â  Â  Â  Â  Â  const lineTotalText = row.querySelector('.edit-line-total').value;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  finalTotal += parseCurrency(lineTotalText);

Â  Â  Â  Â  Â  Â  itemsHTML += `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="quote-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="item-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="item-name">${name}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="item-details">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>MÃ£ SP: (Äang cáº­p nháº­t)</span> |
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Báº£o hÃ nh: ${warranty}</span> |
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Sá»‘ lÆ°á»£ng: ${quantity}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="item-price">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${lineTotalText}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  });

Â  Â  Â  Â  // == Báº N CÃ“ THá»‚ Sá»¬A THÃ”NG TIN Cá»¬A HÃ€NG á» ÄÃ‚Y ==
Â  Â  Â  Â  const tenCuaHang = "MÃY TÃNH DÅ¨NG TRANG";
Â  Â  Â  Â  const diaChi = "213 Tráº§n Kim Xuyáº¿n";
Â  Â  Â  Â  const sdt = "Hotline:";
Â  Â  Â  Â  const ghiChu = "QuÃ½ khÃ¡ch vui lÃ²ng kiá»ƒm tra ká»¹ thÃ´ng tin sáº£n pháº©m";
Â  Â  Â  Â  // ============================================

Â  Â  Â  Â  // 3. Táº¡o ná»™i dung trang
Â  Â  Â  Â  const newPageContent = FILE BÃO GIÃ  `
Â  Â  Â  Â  Â  Â  <!DOCTYPE html>
Â  Â  Â  Â  Â  Â  <html lang="vi">
E html>
<html lang="vi">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>XÃ¢y dá»±ng PC (Admin Full Chá»©c NÄƒng)</title>
Â  Â Â 
Â  Â  <style>
Â  Â  Â  Â  /* (ToÃ n bá»™ CSS chung cá»§a báº¡n giá»¯ nguyÃªn, khÃ´ng thay Ä‘á»•i) */
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
Â  Â  Â  Â  Â  Â  background-color: #f0f2f5;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  padding: 30px;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  }
Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  background-color: #ffffff;
Â  Â  Â  Â  Â  Â  padding: 30px;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  max-width: 900px;
Â  Â  Â  Â  Â  Â  margin-bottom: 30px;
AILURE:
invalid_code
REASON:
Invalid HTML file: 2 validation errors:
  - Unexpected end tag (tfoot)
  - Unexpected end tag (button)
